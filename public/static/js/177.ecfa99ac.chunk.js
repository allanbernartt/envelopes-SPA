"use strict";(self.webpackChunkenvelope_frontend=self.webpackChunkenvelope_frontend||[]).push([[177],{7177:function(e,s,a){a.r(s),a.d(s,{default:function(){return F}});var r=a(1413),n=a(4165),t=a(5861),i=a(9439),o=a(2791),c=a(2952),l=a(3504),u=a(6871),m="AuthPage_authContainer__PUd1P",p="AuthPage_loginFormContainer__zRL7E",d="AuthPage_loginFormTitle__pmF5b",h="AuthPage_loginFormInputs__yQK+Q",x="AuthPage_loginFormAction__Ygy4I",g="AuthPage_forgotPassword__9ZmKa",_="AuthPage_btnSubmit__H72k-",f="AuthPage_btnSwitch__nDzpz",v="AuthPage_errorMessage__LNiwD",j="AuthPage_serverError__9oNpJ",N="AuthPage_sessionExpiration__Nslkf",w=a(9508),P=a(1135),E=a(3108),k=a(7831),A=a(3719),y=a(3168),C=a(8170),b=a(184),F=function(){var e,s=(0,y.$)().t,a=(0,o.useContext)(E.V),F=(0,o.useState)(!0),M=(0,i.Z)(F,2),S=M[0],Z=M[1],L=(0,w.x)(),H=L.isLoading,T=L.error,q=L.sendRequest,O=L.clearError,I=(0,c.cI)({mode:"onChange"}),J=I.register,z=I.formState.errors,D=I.getValues,R=I.handleSubmit,$=(0,u.s0)(),K=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(s){var r,t,i,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,C.$)(null,a.csurfTk),t=new AbortController,!S){e.next=15;break}return e.prev=3,i={user_email:s.user_email,password:s.password},e.next=7,q("https://envelope-project.herokuapp.com/api/1.0/users/login",t,"POST",JSON.stringify(i),r);case 7:o=e.sent,a.login(o.userId,o.token),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:e.next=24;break;case 15:return e.prev=15,c={user_name:s.user_name,user_email:s.user_email,password:s.password,passConfirmation:s.passConfirmation},e.next=19,q("https://envelope-project.herokuapp.com/api/1.0/users/register",t,"POST",JSON.stringify(c),r);case 19:$("/".concat(k.H.users,"/").concat(k.H.emailSent,"?requestType=activation")),e.next=24;break;case 22:e.prev=22,e.t1=e.catch(15);case 24:case"end":return e.stop()}}),e,null,[[3,11],[15,22]])})));return function(s){return e.apply(this,arguments)}}();return H?(0,b.jsx)(A.Z,{}):(T&&(e=JSON.parse(T)),(0,b.jsxs)("div",{className:m,children:[a.sessionExpiration&&(0,b.jsx)("div",{className:N,children:(0,b.jsx)("p",{children:s("sessionExpiration")})}),(0,b.jsx)("div",{className:p,children:(0,b.jsxs)("form",{onSubmit:R(K),children:[(0,b.jsx)("div",{className:d,children:(0,b.jsx)("h1",{children:s(S?"loginTag":"createAccount")})}),(0,b.jsxs)("div",{className:h,children:[!S&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("input",(0,r.Z)({placeholder:s("name")},J("user_name",{required:s("fieldNotEmpty"),minLength:{value:3,message:s("nameFieldMaxMin")},maxLength:{value:25,message:s("nameFieldMaxMin")}}))),z.user_name&&(0,b.jsx)("p",{className:v,children:z.user_name.message}),e&&e.user_name&&(0,b.jsx)("p",{className:v,children:e.user_name})]}),(0,b.jsx)("input",(0,r.Z)({placeholder:"Email",type:"text"},J("user_email",{required:s("fieldNotEmpty"),pattern:{value:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/,message:s("validEmailField")}}))),z.user_email&&(0,b.jsx)("p",{className:v,children:z.user_email.message}),e&&e.user_email&&(0,b.jsx)("p",{className:v,children:e.user_email}),(0,b.jsx)("input",(0,r.Z)({placeholder:s("password"),type:"password"},J("password",{required:s("fieldNotEmpty"),minLength:{value:8,message:s("passFieldMaxMin")},maxLength:{value:25,message:s("passFieldMaxMin")}}))),z.password&&(0,b.jsx)("p",{className:v,children:z.password.message}),e&&e.password&&(0,b.jsx)("p",{className:v,children:e.password}),!S&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("input",(0,r.Z)({placeholder:s("confirmPass"),type:"password"},J("passConfirmation",{required:s("fieldNotEmpty"),validate:{matchesPreviousPassword:function(e){return D().password===e||s("passMatchField")}}}))),z.passConfirmation&&(0,b.jsx)("p",{className:v,children:z.passConfirmation.message}),e&&e.passConfirmation&&(0,b.jsx)("p",{className:v,children:e.passConfirmation})]})]}),e&&e.serverMessage&&(0,b.jsx)("div",{className:j,children:(0,b.jsx)("p",{children:e.serverMessage})}),e&&e.emailErrorMessage&&(0,b.jsxs)("div",{className:j,children:["(",(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{children:e.emailErrorMessage}),(0,b.jsx)(l.OL,{to:"/".concat(k.H.users,"/").concat(k.H.account,"/").concat(k.H.sendEmail,"?requestType=activation"),children:s("resendActivationEmail")})]}),")"]}),(0,b.jsx)("div",{className:g,children:S&&(0,b.jsx)(l.OL,{to:"/".concat(k.H.users,"/").concat(k.H.account,"/").concat(k.H.sendEmail,"?requestType=password"),children:s("forgotPass")})}),(0,b.jsxs)("div",{className:x,children:[(0,b.jsx)(P.Z,{className:_,children:S?"LOGIN":s("btnRegister")}),(0,b.jsxs)(P.Z,{className:f,onClick:function(e){e.preventDefault(),Z((function(e){return!e})),O()},children:[s("switchTo")," ",S?s("createAccount"):"Login"]})]})]})})]}))}}}]);
//# sourceMappingURL=177.ecfa99ac.chunk.js.map