"use strict";(self.webpackChunkenvelope_frontend=self.webpackChunkenvelope_frontend||[]).push([[633],{4633:function(e,s,r){r.r(s);var n=r(1413),a=r(4165),t=r(5861),o=r(9439),i=r(2791),c=r(6871),l=r(3504),d=r(3168),u=r(9508),p=r(7831),m=r(2952),w=r(1229),f=r(3719),h=r(1135),g=r(3108),v=r(8170),x=r(184);s.default=function(){var e=(0,i.useContext)(g.V),s=(0,d.$)().t,r=(0,u.x)(),_=r.isLoading,Z=r.error,j=r.sendRequest,P=r.clearError,C=(0,i.useState)(!1),M=(0,o.Z)(C,2),N=M[0],k=M[1],R=(0,i.useState)(!1),b=(0,o.Z)(R,2),F=b[0],S=b[1],y=(0,c.UO)().token,A=(0,m.cI)({mode:"onChange"}),L=A.register,O=A.formState.errors,E=A.getValues,H=A.handleSubmit;(0,i.useEffect)((function(){var e=new AbortController,s=function(){var s=(0,t.Z)((0,a.Z)().mark((function s(){return(0,a.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,j("https://envelope-project.herokuapp.com/api/1.0"+"/users/user-password-reset/".concat(y),e);case 3:k(!0),s.next=8;break;case 6:s.prev=6,s.t0=s.catch(0);case 8:case"end":return s.stop()}}),s,null,[[0,6]])})));return function(){return s.apply(this,arguments)}}();s()}),[j,y]);var T,q=function(){var s=(0,t.Z)((0,a.Z)().mark((function s(r){var n,t,o;return(0,a.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n=(0,v.$)(null,e.csurfTk),P(),t=new AbortController,s.prev=3,o={new_password:r.new_password,newPassConfirmation:r.newPassConfirmation},s.next=7,j("https://envelope-project.herokuapp.com/api/1.0"+"/users/user-password-reset/".concat(y),t,"POST",JSON.stringify(o),n);case 7:S(!0),s.next=12;break;case 10:s.prev=10,s.t0=s.catch(3);case 12:case"end":return s.stop()}}),s,null,[[3,10]])})));return function(e){return s.apply(this,arguments)}}();return _?(0,x.jsx)(f.Z,{}):(Z&&(T=JSON.parse(Z)),T&&T.serverMessage?(0,x.jsxs)("div",{className:w.Z.invalidContainer,children:[(0,x.jsx)("p",{children:T.serverMessage}),(0,x.jsx)(l.OL,{to:"/".concat(p.H.users,"/").concat(p.H.account,"/").concat(p.H.sendEmail,"?requestType=password"),children:"Try again?"})]}):F?(0,x.jsxs)("div",{className:w.Z.successMessage,children:[(0,x.jsx)("h1",{children:s("passResetSuccess")}),(0,x.jsx)("h2",{children:s("loginWithNewPass")}),(0,x.jsx)(l.OL,{to:"/".concat(p.H.users,"/").concat(p.H.auth),children:"Login"})]}):!_&&N?(0,x.jsxs)("div",{className:w.Z.generalFormContainer,children:[(0,x.jsxs)("form",{className:w.Z.generalForm,onSubmit:H(q),children:[(0,x.jsx)("label",{children:"Password: "}),(0,x.jsx)("input",(0,n.Z)({},L("new_password",{required:s("fieldNotEmpty"),minLength:{value:8,message:s("passFieldMaxMin")},maxLength:{value:25,message:s("passFieldMaxMin")}}))),O.new_password&&(0,x.jsx)("p",{className:w.Z.errorMessage,children:O.new_password.message}),T&&T.new_password&&(0,x.jsx)("p",{className:w.Z.errorMessage,children:T.new_password}),(0,x.jsx)("label",{children:"Confirm Password: "}),(0,x.jsx)("input",(0,n.Z)({},L("newPassConfirmation",{required:s("fieldNotEmpty"),validate:{matchesPreviousPassword:function(e){return E().new_password===e||s("passMatchField")}}}))),O.newPassConfirmation&&(0,x.jsx)("p",{className:w.Z.errorMessage,children:O.newPassConfirmation.message}),T&&T.newPassConfirmation&&(0,x.jsx)("p",{children:T.newPassConfirmation}),(0,x.jsx)("div",{className:w.Z.formAction,children:(0,x.jsx)(h.Z,{className:w.Z.formActionBtn,type:"submit",children:s("send")})})]}),T&&T.serverMessage&&(0,x.jsx)("p",{className:w.Z.errorMessage,children:T.serverMessage})]}):void 0)}},1229:function(e,s){s.Z={invalidContainer:"PasswordReset_invalidContainer__ZPlWc",generalFormContainer:"PasswordReset_generalFormContainer__-FE0K",generalForm:"PasswordReset_generalForm__uUORo",errorMessage:"PasswordReset_errorMessage__+9VRc",formAction:"PasswordReset_formAction__1SnTe",formActionBtn:"PasswordReset_formActionBtn__2DRxD",successMessage:"PasswordReset_successMessage__L+2ri"}}}]);
//# sourceMappingURL=633.cf3b5137.chunk.js.map