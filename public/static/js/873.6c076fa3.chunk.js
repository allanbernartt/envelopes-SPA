"use strict";(self.webpackChunkenvelope_frontend=self.webpackChunkenvelope_frontend||[]).push([[873,294],{5429:function(e,n,r){r.d(n,{Z:function(){return C}});var t=r(4165),a=r(5861),s=r(1413),i=r(9439),l=r(9508),c=r(2952),o=r(2791),u=r(3719),d="EnvelopeTransactions_backDrop__AYXZ+",p="EnvelopeTransactions_formContainer__3pw--",h="EnvelopeTransactions_form__bBurX",v="EnvelopeTransactions_formTag__mJobT",m="EnvelopeTransactions_inputContainer__aNfe2",g="EnvelopeTransactions_inputCurrency__h1b92",f="EnvelopeTransactions_formInputs__zEp4s",x="EnvelopeTransactions_errorMessage__HVK9q",_="EnvelopeTransactions_formAction__7rI7n",j="EnvelopeTransactions_buttonOK__ndOIP",E="EnvelopeTransactions_buttonCancel__XWcfW",b="EnvelopeTransactions_buttonError__+Beh1",k=r(1135),N=r(3168),y=r(3108),Z=r(8170),S=r(184),C=function(e){var n,r=(0,o.useContext)(y.V),C=(0,N.$)(),w=C.t,T=C.i18n,F=(0,l.x)(),B=F.isLoading,M=F.error,H=F.sendRequest,O=(0,o.useState)(!1),A=(0,i.Z)(O,2),I=A[0],L=A[1],P=(0,c.cI)({mode:"onChange"}),q=P.register,U=P.formState.errors,G=P.handleSubmit,D=function(){for(var e=document.getElementById("valor"),n=e.value.replace(/[^\d]+/gi,"").split("").reverse().join(""),r="",t="pt"===T.language?"##.###.###,##".split("").reverse().join(""):"##,###,###.##".split("").reverse().join(""),a=0,s=0;a<t.length&&s<n.length;)"#"!==t.charAt(a)?(r+=t.charAt(a),a++):(r+=n.charAt(s),s++,a++);e.value=r.split("").reverse().join("")};M&&(n=JSON.parse(M));var J=e.inputs&&e.inputs.map((function(r){return(0,S.jsxs)("div",{className:f,children:[(0,S.jsx)("label",{children:r.label}),(0,S.jsxs)("div",{className:m,children:[e.currency?(0,S.jsx)("p",{className:g,children:w("currency")}):null,(0,S.jsx)("input",(0,s.Z)({onKeyUp:r.keyUp?D:null,id:r.id?r.id:null,type:r.type,step:r.step?r.step:null,min:r.min?r.min:null,max:r.max?r.max:null,placeholder:r.placeholder?r.placeholder:null},q(r.name,{required:r.requiredMessage||null,minLength:r.minLength?(0,s.Z)({},r.minLength):null,maxLength:r.maxLength?(0,s.Z)({},r.maxLength):null})))]}),U[r.name]&&(0,S.jsx)("p",{className:x,children:U[r.name].message}),n&&n.title&&(0,S.jsx)("p",{className:x,children:n.title}),n&&n.insufficientFunds&&(0,S.jsx)("p",{className:x,children:n.insufficientFunds})]},r.name)})),K=function(){var n=(0,a.Z)((0,t.Z)().mark((function n(a){var i,l,c,o,u,d,p;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=(0,Z.$)(e.token,r.csurfTk),!e.withdrawBudget){n.next=7;break}if(l=parseFloat(a.budget),c=parseFloat(e.withdrawBudget),!(l>=c)){n.next=7;break}return L(!0),n.abrupt("return");case 7:return a.budget?(u="pt"===T.language?a.budget.replaceAll(".",""):a.budget.replaceAll(",",""),d="pt"===T.language?u.replace(",","."):parseFloat(u),o={budget:d}):o=(0,s.Z)({},a),n.prev=8,p=new AbortController,n.next=12,H(e.url,p,e.method,JSON.stringify(o),i);case 12:e.afterSubmitHandler(),n.next=17;break;case 15:n.prev=15,n.t0=n.catch(8);case 17:case"end":return n.stop()}}),n,null,[[8,15]])})));return function(e){return n.apply(this,arguments)}}(),z=function(n){n.preventDefault(),e.cancel()};if(B)return(0,S.jsx)(u.Z,{});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:d,onClick:z}),(0,S.jsxs)("div",{className:p,children:[(0,S.jsx)("div",{className:v,children:(0,S.jsx)("p",{children:e.transactionType})}),e.delete&&(0,S.jsx)("h3",{children:w("deleteEnvelope")}),(0,S.jsxs)("form",{className:h,onSubmit:G(K),children:[(0,S.jsx)("div",{children:J}),(0,S.jsxs)("div",{className:_,children:[(0,S.jsx)(k.Z,{type:"submit",className:j,children:w("send")}),(0,S.jsx)(k.Z,{onClick:z,className:E,children:w("cancel")})]})]}),n&&n.message&&(0,S.jsx)("p",{children:n.message}),I&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("p",{children:w("sourceInsufficientFunds")}),(0,S.jsx)(k.Z,{className:b,onClick:function(){L(!1)},children:"Ok"})]})]})]})}},8676:function(e,n,r){r.d(n,{Z:function(){return s}});var t="ErrorCard_errorCard__JwCDV",a=r(184),s=function(e){return(0,a.jsx)("div",{className:t,children:e.children})}},294:function(e,n,r){r.r(n),r.d(n,{default:function(){return d}});var t="GenericError_genericErrorContainer__H4PWg",a="GenericError_genericErrorAction__Oibjj",s="GenericError_backBtn__e8Pm1",i="GenericError_homeButton__E1GvU",l=r(6871),c=r(1135),o=r(3168),u=r(184),d=function(e){var n=(0,o.$)().t,r=(0,l.s0)(),d=e.errMsg||n("genericError");return(0,u.jsxs)("div",{className:t,children:[(0,u.jsx)("h1",{children:"OOPS!"}),(0,u.jsx)("h2",{children:d}),(0,u.jsxs)("div",{className:a,children:[(0,u.jsx)(c.Z,{className:s,onClick:function(){e.onClearError()},children:n("goBack")}),(0,u.jsx)(c.Z,{className:i,onClick:function(){r("/")},children:"Home"})]})]})}},7873:function(e,n,r){r.r(n),r.d(n,{default:function(){return w}});var t=r(4165),a=r(5861),s=r(9439),i=r(2791),l=r(6871),c=r(3504),o=r(3108),u=r(9508),d="SingleEnvelope_singleEnvelopeContainer__zW+kX",p="SingleEnvelope_envelope__vg8Mr",h="SingleEnvelope_singleEnvelopeInfo__ane-c",v="SingleEnvelope_singleEnvelopeStats__z17f8",m="SingleEnvelope_circleContainer__x0s3s",g="SingleEnvelope_singleEnvelopeActions__GxKww",f="SingleEnvelope_singleEnvelopeActionBtn__d0G7w",x="SingleEnvelope_circle__Fxn85",_="SingleEnvelope_inner__v5Nqt",j=r(7831),E=r(5429),b=r(3719),k=r(1135),N=r(8676),y=r(294),Z=r(3168),S=r(8442),C=r(184),w=function(e){var n=(0,Z.$)(),r=n.t,w=n.i18n,T=(0,i.useContext)(o.V),F=(0,l.UO)().envelopeId,B=(0,i.useState)(),M=(0,s.Z)(B,2),H=M[0],O=M[1],A=(0,i.useState)(0),I=(0,s.Z)(A,2),L=I[0],P=I[1],q=(0,i.useState)(0),U=(0,s.Z)(q,2),G=U[0],D=U[1],J=(0,i.useState)(),K=(0,s.Z)(J,2),z=K[0],R=K[1],V=(0,i.useState)(),W=(0,s.Z)(V,2),X=W[0],$=W[1],Y=(0,i.useState)(),Q=(0,s.Z)(Y,2),ee=Q[0],ne=Q[1],re=(0,l.s0)(),te=(0,u.x)(),ae=te.isLoading,se=te.error,ie=te.sendRequest,le=te.clearError;if((0,i.useEffect)((function(){var e=new AbortController;try{var n=function(){var n=(0,a.Z)((0,t.Z)().mark((function n(){var r,a,s,i,l;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ie("https://envelope-project.herokuapp.com/api/1.0"+"/envelopes/".concat(F),e,"GET",null,{"Content-Type":"application/json",Authorization:"Bearer "+T.token});case 2:r=n.sent,a=r.totalBudget.total_budget?r.totalBudget.total_budget:0,s=parseFloat(a),i=parseFloat(r.envelopes.budget),s>0&&(l=+(i/s*100).toPrecision(2),D(l)),O(r.envelopes),P(s);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}catch(se){}}),[ie,T.token,F]),ae)return(0,C.jsx)(b.Z,{});var ce;if(se){if((ce=JSON.parse(se)).invalidId)return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(N.Z,{children:[(0,C.jsx)("h1",{children:ce.invalidId}),(0,C.jsx)(k.Z,{onClick:function(){le(),re("/".concat(j.H.envelopes,"/").concat(j.H.userEnvelopes))},children:"OK"})]})});if(ce.serverMessage)return(0,C.jsx)(y.default,{errMsg:ce.serverMessage,onClearError:le})}var oe=function(){re("/".concat(j.H.envelopes,"/").concat(j.H.userEnvelopes))},ue=[{label:r("title"),type:"text",placeholder:r("title"),name:"title",requiredMessage:r("fieldNotEmpty"),minLength:{value:2,message:r("titleFieldMaxMin")},maxLength:{value:25,message:r("titleFieldMaxMin")}}],de=[{label:r("amount"),type:"text",step:.01,placeholder:r("howMuch"),name:"budget",requiredMessage:r("fieldNotEmpty"),min:.01,keyUp:!0,id:"valor"}];if(!ae&&H){var pe=[{label:r("amount"),type:"text",placeholder:r("howMuch"),name:"budget",requiredMessage:r("fieldNotEmpty"),max:H.budget,id:"valor",keyUp:!0}],he=(0,S.P)(H.budget,w.language),ve=(0,S.P)(L,w.language);return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:d,children:[X&&(0,C.jsx)(E.Z,{transactionType:r("deposit"),method:"POST",currency:!0,inputs:de,token:T.token,url:"https://envelope-project.herokuapp.com/api/1.0"+"/transactions/".concat(H.env_id,"/deposit"),cancel:function(){$(!1)},afterSubmitHandler:oe}),ee&&(0,C.jsx)(E.Z,{transactionType:r("withdraw"),method:"POST",currency:!0,inputs:pe,token:T.token,url:"https://envelope-project.herokuapp.com/api/1.0"+"/transactions/".concat(H.env_id,"/withdraw"),cancel:function(){ne(!1)},afterSubmitHandler:oe,withdrawBudget:H.budget}),z&&(0,C.jsx)(E.Z,{transactionType:r("update"),method:"PUT",inputs:ue,token:T.token,url:"https://envelope-project.herokuapp.com/api/1.0"+"/envelopes/".concat(H.env_id),cancel:function(){R(!1)},afterSubmitHandler:oe}),(0,C.jsxs)("div",{className:h,children:[(0,C.jsx)("div",{children:(0,C.jsx)("h1",{children:H.title})}),(0,C.jsxs)("div",{className:v,children:[(0,C.jsx)("div",{className:m,children:(0,C.jsx)("div",{className:"".concat(x),style:{backgroundImage:"conic-gradient(#302d2e ".concat(G,"%, #cbc3bf 0)")},children:(0,C.jsxs)("div",{className:_,children:[G,"%"]})})}),(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("h2",{children:he}),(0,C.jsx)("p",{children:r("budget")})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("h2",{children:ve}),(0,C.jsx)("p",{children:r("totalBudget")})]})]})]})]}),(0,C.jsxs)("div",{className:g,children:[(0,C.jsx)(k.Z,{className:f,onClick:function(){R(!1),ne(!1),$(!0)},children:r("deposit")}),(0,C.jsx)(k.Z,{className:f,onClick:function(){R(!1),$(!1),ne(!0)},children:r("withdraw")}),(0,C.jsx)(k.Z,{className:f,onClick:function(){$(!1),ne(!1),R(!0)},children:"".concat(r("update")," ").concat(r("title"))}),(0,C.jsx)(k.Z,{className:f,onClick:function(){re("/".concat(j.H.envelopes,"/").concat(j.H.userEnvelopes))},children:r("myEnvelopes")})]}),(0,C.jsx)("div",{className:p,children:(0,C.jsx)(c.OL,{as:c.OL,to:"/".concat(j.H.envelopes,"/").concat(j.H.transfer,"/").concat(H.env_id),children:r("transferToAnother")})})]})})}}},8442:function(e,n,r){r.d(n,{P:function(){return t}});var t=function(e,n){return("pt"===n?Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}):Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2})).format(e)}}}]);
//# sourceMappingURL=873.6c076fa3.chunk.js.map